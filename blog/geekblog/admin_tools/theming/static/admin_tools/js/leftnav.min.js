jQuery(document).ready(function(){var g=$(".actions");if(g.length==1){g.prepend('<input type="checkbox" id="selectall" class="selectall" onclick="$(\'#action-toggle\').click()"/>全选');var k=$(".actions .button");var l=$('.actions select[name="action"]').get(0);if(l.children.length==2){l.selectedIndex=1;var c=l.children[1].text;k.text(c);if(l.children[1].value=="delete_selected_items"){k.attr({"id":"action_submit_btn","title":c})}else{if(l.children[1].value=="sync_selected_items"){k.attr({"id":"action_submit_btn","title":c,"class":"sync_btn"})}}}else{var o=l.children[1].text;var n=l.children[2].text;k.text(o);k.attr({"id":"action_submit_btn","title":o});k.after('<button class="sync_btn" title="'+n+'">'+n+"</button>");l.value="delete_selected_items"}}$(".sync_btn").click(function(){$('.actions select[name="action"]').get(0).value="sync_selected_items";$("#action_submit_btn").click()});changelist_save_btn=$("#list_save_btn");if(changelist_save_btn.length==1){$(".top_toolbar").prepend('<input type="submit" name="_save" class="default" value="保存" onclick="$(\'#list_save_btn\').click();" />')}else{$(".object-tools").addClass("toR")}var b=$("#changelist-filter h3");for(var e=0;e<b.length;e++){var h=$(b[e]);var j=h.next().find("li.selected").text().replace(/\s/g,"");if(j!="全部"){h.text(j)}}var m=$(".vForeignKeyRawIdAdminField").next().next();for(var e=0;e<m.length;e++){var a=$(m[e]).attr("href");if(a!=undefined&&a.indexOf("rtn_url")==-1){a+="?rtn_url="+$('input[name="url"]').val().replace(/\/(\w+)\/$/,"/");$(m[e]).attr("href",a)}}$(".vForeignKeyRawIdAdminField").change(function(){var i=$(this).val();if(i==""|i==undefined){$(this).next().next().find("strong").text("")}else{var f=$(this).next().next();$.getJSON("../../../get_related_lookup_info?cls_name="+f.attr("cls_name")+"&v="+i,function(q){if(q==""||q==undefined){alert("请输入正确的ID.")}else{f.find("strong").text(q);var p=f.attr("href").replace(/\/(\d+|obj_id_placeholder)\//,"/"+i+"/");f.attr("href",p)}})}});$(".vIntegerField").keydown(function(f){if(f.keyCode==46||f.keyCode==8||f.keyCode==9||f.keyCode==27||f.keyCode==13||(f.keyCode==65&&f.ctrlKey===true)||(f.keyCode>=35&&f.keyCode<=39)){return}else{if(f.shiftKey||(f.keyCode<48||f.keyCode>57)&&(f.keyCode<96||f.keyCode>105)){f.preventDefault()}}});jQuery("#leftnav h3, #changelist-filter h3").click(function(){if(jQuery(this).hasClass("open")){jQuery(this).removeClass("open");jQuery(this).addClass("close");jQuery(this).next().slideUp("fast")}else{if(jQuery(this).hasClass("close")){jQuery(this).removeClass("close");jQuery(this).addClass("open");jQuery(this).next().slideDown("fast")}else{if(jQuery(this).hasClass("no-child")){return true}}}return false});$("#leftnav h3").click();var d=$("#leftnav .active");if(d.length==0){$("#leftnav h3")[0].click();$("#leftnav h3")[1].click()}else{d.parent().prev().click();d.parent().prev().parent().prev().click()}});
