jQuery(document).ready(function(){var g=$(".icon_path .file-upload>a"),e=$("#uploadsmallimg"),d=$("#imgpreview");if(g.length!=0&&e.length!=0&&g.attr("href")){d[0].src=e[0].src=g[0].href;e.mouseover(function(){d.css("display","block")});e.mouseout(function(){d.css("display","none")})}else{if(e.length!=0){g=$(".icon_path>div>p:nth-child(2)");if(g.length){e[0].src="http://estoredwnld7.189store.com/"+g.text()}}}var k=$(".actions");if(k.length==1){k.prepend('<input type="checkbox" id="selectall" class="selectall" onclick="$(\'#action-toggle\').click()"/>全选');var n=$(".actions .button");var o=$('.actions select[name="action"]').get(0);if(o.children.length==2){o.selectedIndex=1;var c=o.children[1].text;n.text(c);if(o.children[1].value=="delete_selected_items"){n.attr({"id":"action_submit_btn","title":c})}else{if(o.children[1].value=="sync_selected_items"){n.attr({"id":"action_submit_btn","title":c,"class":"sync_btn"})}}}else{var r=o.children[1].text;var q=o.children[2].text;n.text(r);n.attr({"id":"action_submit_btn","title":r});n.after('<button class="sync_btn" title="'+q+'">'+q+"</button>");o.value="delete_selected_items"}}$(".sync_btn").click(function(){$('.actions select[name="action"]').get(0).value="sync_selected_items";$("#action_submit_btn").click()});changelist_save_btn=$("#list_save_btn");if(changelist_save_btn.length==1){$(".top_toolbar").prepend('<input type="submit" name="_save" class="default" value="保存" onclick="$(\'#list_save_btn\').click();" />')}else{$(".object-tools").addClass("toR")}var b=$("#changelist-filter h3");for(var j=0;j<b.length;j++){var l=$(b[j]);var m=l.next().find("li.selected").text().replace(/\s/g,"");if(m!="全部"){l.text(m)}}var p=$(".vForeignKeyRawIdAdminField").next().next();for(var j=0;j<p.length;j++){var a=$(p[j]).attr("href");if(a!=undefined&&a.indexOf("rtn_url")==-1){a+="?rtn_url="+$('input[name="url"]').val().replace(/\/(\w+)\/$/,"/");$(p[j]).attr("href",a)}}$(".vForeignKeyRawIdAdminField").change(function(){var i=$(this).val();if(i==""|i==undefined){$(this).next().next().find("strong").text("")}else{var f=$(this).next().next();$.getJSON("../../../get_related_lookup_info?cls_name="+f.attr("cls_name")+"&v="+i,function(t){if(t==""||t==undefined){alert("请输入正确的ID.")}else{if(t=="not_reviewed_app"){alert("请输入已审核的应用.")}else{f.find("strong").text(t);var s=f.attr("href").replace(/\/(\d+|obj_id_placeholder)\//,"/"+i+"/");f.attr("href",s)}}})}});$(".vIntegerField").keydown(function(f){if(f.keyCode==46||f.keyCode==8||f.keyCode==9||f.keyCode==27||f.keyCode==13||(f.keyCode==65&&f.ctrlKey===true)||(f.keyCode>=35&&f.keyCode<=39)){return}else{if(f.shiftKey||(f.keyCode<48||f.keyCode>57)&&(f.keyCode<96||f.keyCode>105)){f.preventDefault()}}});jQuery("#leftnav h3, #changelist-filter h3").click(function(){if(jQuery(this).hasClass("open")){jQuery(this).removeClass("open");jQuery(this).addClass("close");jQuery(this).next().slideUp("fast")}else{if(jQuery(this).hasClass("close")){jQuery(this).removeClass("close");jQuery(this).addClass("open");jQuery(this).next().slideDown("fast")}else{if(jQuery(this).hasClass("no-child")){return true}}}return false});$("#leftnav h3").click();var h=$("#leftnav .active");if(h.length==0){$("#leftnav h3")[0].click();$("#leftnav h3")[1].click()}else{h.parent().prev().click();h.parent().prev().parent().prev().click()}});
